<html>

<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <table>
        <tr>
            <td>Phone Number</td>
            <td><input name="mobile" type="text" id="mobile" /></td>
        </tr>
        <tr>
            <td>Verification</td>
            <td><input name="code" type="text" id="verificationCode" readonly /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="button" name="code" value="get Verif Code" id="getCode" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="button" name="login" value="Login" id="login" /></td>
        </tr>
    </table>

    <script>
        $(document).ready(function () {
            $("#getCode").click(function () {
                var mobile = $("#mobile").val();
                if (mobile === "") {
                    alert("please enter your mobile number");
                    return;
                }

                $.ajax({
                    url: "./Sms/sendSmsVerificationTaskMode?mobile=" + mobile,
                    type: "GET",
                    success: function (response) {
                        $("#verificationCode").val(response);

                    }
                })

            });

            $("#login").click(function () {
                var mobile = $("#mobile").val();
                var code = $("#verificationCode").val();

                if (mobile === "") {
                    alert("please enter your mobile number");
                    return;
                }

                $.ajax({
                    url: "./login/login",
                    type: "POST",
                    data: {
                        mobile: mobile,
                        code: code
                    },
                    success: function (response) {
                        if (response) {
                            window.location.href="./index/index";
                        } else {
                            alert("Login failed, mobile and code not match");
                        }

                    }
                })

            });
        });
    </script>
</body>

</html>